https://www.toptal.com/go/golang-oop-tutorial
https://en.wikipedia.org/wiki/Dependency_injection
https://calver.org/

GOOS=js GOARCH=wasm go build -v -o gomps5.wasm -ldflags="-s -w"
python3 -m http.server

[ONGOING]
 work at reducing the size of variant.go files (CardPair &c)
 get rid of TheBaize.* (used 134, now 78, now 70 times 16 Dec 2021)
  Pile.owner
 grep .subtype).(type) or ).(*Stock)
 having Generic functions doesn't seem quite right
 Add more Preferences
 Complete ExtendedColors

[TODO]
 recalc dims after increasing window height
 host WASM version @ oddstream.github.io instead of gosol
 Copy variant list from opsole/gomps2
  Agnes
  Assembly
  Beleaguered Castle
  Blockade
  Canfield, Rainbow Canfield, Acme, Storehouse
  Chessboard
  Creepy Crawly
  Cruel
  Good Measure
  Fortress
  Forty and Eight
  Lucas
  Number Ten
  Baker's Game
  Josephine
  Busy Aces
  Martha
  Mrs Mop
  Osmosis/Peek
  Perseverance
  Single Rail
  Sir Tommy
  Little Spider
  Thoughtful
  Whitehead
  Will O' the Wisp
  Russian

 Save and Exit? (for WASM) (or cunning method of ensuring saved.json is up-to-date)
 clean up statistics reporting
 clean up rune to suit &c nonsense in util
 streaks and percentages in README.md
 are both symbol and label needed? encode a glyph into label
 portrait | landscape, adjust screen size?
 fanType becomes more enum-like?
 https://github.com/oneoffcode/picol
 hearts and 10s are too close to the edge
 show NewDeal FAB when loading a complete saved.txt
 explain UI in README.md (a game of sorting cards and moving them to the foundation piles...)
 WASM not getting WindowWidth,Height at startup, try getting from other sources
 WASM not scrunching?
 scale slot up by 10, call it slot10 to help remember

[DONE]
x card image ExtraColors
x https://pkg.go.dev/golang.org/x/image/font/gofont/goregular
x dragging an animated card is not ok
x try error return from Game.Update() to exit RunGame loop
x Trying no NoDrawing to stop Windows startup lag? Nope.
x move working directoreis to T7
x Bebas Neue for Acme?
x Panic stop dragging unknown object
x pretty up Compare_Empty error message, use long ordinal names
x Stock and Waste rules filtered out without having to call script.TailAppendError()
x tap on statusbar COMPLETE to retoast welcome
x BUG not saving pile label to saved.txt
x x average % complete
x *_windows.go
x not descrunching both piles after pop?
x BUG undo Duchess didn't reset Pile label
x highlight pile/card that dragged card would land on?
x Duchess, with it's odd rules
x copy WidgetBase.Draw mouse down stuff to Pile with recycle rune
x retire PercentComplete from script interface; we won't be doing poker games
x retire move counting and reporting, wouldn't do it in Real Life, and it's not accurate
x cardLibrary could be a global
x Animate rune when mouse pushed
x Conformant check/FAB with discards is odd
x cards thinking they were being dragged when they were not
x TheBaize.tableaux &c could be setup after script.BuildPiles()
x try https://go.dev/blog/go-fonts - did not look appropriate
x crypto rand (doesn't have seed or shuffle)
x Welcome toast not showing
x Draw things upsidedown using Rotate() https://github.com/fogleman/gg/blob/master/examples/rotated-text.go
x statistics
x mirror baize
x spinning cards didn't stop spinning when pressing the FAB quickly
x FAB not showing
x send parameters to script files
x Scrunch()
x Complete()
x saved.json
x percent complete
x use of Generic in Collect() and TailTapped() smells wrong
x TailTapped() to Foundations
x status bar update (stock waste moves)
x undoStack
x NewVariant
? PileFannedRect no correct after building up tableau
?  only correct when card transitioning
x Refan not working as expected after changing cards from fixed to scaled
x Tap on stock not working as expected
x  card movement & new position not being shown
x move IsStock out of base
 move anything out of base that requires pile
 don't record Pile interface in Base
   why not? what's the workaround?

 decide how to represent Vector2 and Rectangle
    image.Point X,Y int
    image.Rectangle Min,Max point
    (gomps4 uses x,y,width,height Rectangle)
    image.Rectangle.Dx / Dy to get width, height

 don't fire up the UI
 take out load/save state
 take out undo
 scrunch can be a no-op for now

 cards with pips are easier to scan ...
 retire saving individual saved games
 new scrunch
 new % complete
 seven pile subtypes: cell, discard, foundation, label, stock, tableau, waste
 retire rules
x script interface
 variants/ directory containing one .go file for each variant
x SingleTap off all the time
x FreeDrag on all the time
x retire highlight movable
x retire Card shake
x retire ghost card images, show target
x add cardLibrary (including suitless cards with suit=0, one blank card and one card back (Cornflowerblue))
x also retires modern.go, TheCIP, and CardImageProvider
x retire retro cards, Preferences.CardType, cardimageprovider, TheCIP
x rename module from oddstream.games/gosol to oddstream.games/gomps5
x retire GSM
x retire Splash